<UserControl x:Class="Cafe_Kiosk.Views.Payment.PaymentStartView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Cafe_Kiosk.Views.Payment"
             xmlns:model="clr-namespace:Cafe_Kiosk.Models" 
             xmlns:fa6="http://schemas.fontawesome.com/icons/svg" 
             xmlns:converters="clr-namespace:Cafe_Kiosk.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="1000" d:DesignWidth="720">

    <UserControl.Resources>
        <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
    </UserControl.Resources>

    <Grid Background="Transparent"
          Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="60"/>
        </Grid.RowDefinitions>

        <!--Info Text-->
        <TextBlock Grid.Row="0"
                   Text="아래 내용을 확인한 후 결제를 진행해주세요."
                   FontSize="18"
                   FontWeight="SemiBold"
                   Margin="0 0 0 20"/>

        <!--Cart Items List-->
        <Border Grid.Row="1"
                Background="White"
                CornerRadius="4"
                BorderBrush="Gray"
                BorderThickness="1"
                Padding="5">
            <ListView ItemsSource="{Binding CartItems}"
                      Margin="0 0 0 20"
                      Background="Transparent"
                      BorderThickness="0">
                <ListView.Resources>
                    <Style TargetType="TextBlock">
                        <Setter Property="Foreground" Value="Black"/>
                    </Style>
                </ListView.Resources>

                <ListView.View>
                    <GridView>
                        <!--Image-->
                        <GridViewColumn Header="이미지" Width="80">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Width="60" Height="60"
                                            Background="White"
                                            BorderBrush="LightGray"
                                            BorderThickness="1"
                                            CornerRadius="4">
                                        <Image Source="{Binding MenuItem.ImageUri}"
                                               Stretch="Uniform"
                                               Visibility="{Binding MenuItem.ImageUri, Converter={StaticResource NullToVisibilityConverter}}"/>
                                    </Border>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <!--Name-->
                        <GridViewColumn Header="이름" Width="80" DisplayMemberBinding="{Binding MenuItem.Name}"/>

                        <!--Size / Shot-->
                        <GridViewColumn Header="사이즈 / 샷" Width="80">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                        <TextBlock Text="{Binding DisplayCoffeeSize}"/>
                                        <TextBlock Text="{Binding DisplayShotCount}"
                                                   Foreground="Gray"
                                                   FontSize="12"/>
                                    </StackPanel>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <!--Temperature-->
                        <GridViewColumn Header="온도 / 얼음량" Width="120" DisplayMemberBinding="{Binding DisplayTemperatureWithIce}"/>

                        <!--Quantity-->
                        <GridViewColumn Header="개수" Width="40" DisplayMemberBinding="{Binding Quantity}"/>

                        <!--Total Price-->
                        <GridViewColumn Header="총 가격" Width="80">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding TotalPrice, StringFormat='\{0:N0}'}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView>
                </ListView.View>
            </ListView>
        </Border>

        <!--Total Price-->
        <TextBlock Grid.Row="2"
                   Text="{Binding TotalCartPrice, StringFormat='총 결제 금액: {0:N0}원'}"
                   FontSize="18"
                   FontWeight="Bold"
                   TextAlignment="Right"
                   Margin="5 10 5 5"/>

        <!--Buttons-->
        <StackPanel Grid.Row="3"
                    Margin="0 0 10 10"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right">
            <Button Width="120"
                    Command="{Binding GoBackCommand}">
                <StackPanel Orientation="Horizontal">
                    <fa6:SvgAwesome Icon="Solid_LeftLong"
                                    Width="20" Height="20"
                                    Margin="5 0"/>
                    <TextBlock Text="이전 화면"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontSize="15"/>
                </StackPanel>
            </Button>
            <Button Width="120"
                    Command="{Binding ProceedPaymentCommand}">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="결제 진행"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontSize="15"/>
                    <fa6:SvgAwesome Icon="Solid_RightLong"
                                    Width="20" Height="20"
                                    Margin="5 0"/>
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>
</UserControl>
    